<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Cynthia">

<title>Untargeted HDL lipidomics peak height</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="untargeted_lipidome_peak_interactive_files/libs/clipboard/clipboard.min.js"></script>
<script src="untargeted_lipidome_peak_interactive_files/libs/quarto-html/quarto.js"></script>
<script src="untargeted_lipidome_peak_interactive_files/libs/quarto-html/popper.min.js"></script>
<script src="untargeted_lipidome_peak_interactive_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="untargeted_lipidome_peak_interactive_files/libs/quarto-html/anchor.min.js"></script>
<link href="untargeted_lipidome_peak_interactive_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="untargeted_lipidome_peak_interactive_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="untargeted_lipidome_peak_interactive_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="untargeted_lipidome_peak_interactive_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="untargeted_lipidome_peak_interactive_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article toc-left">
<div id="quarto-sidebar-toc-left" class="sidebar toc-left">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#cvs-of-pooled-samples" id="toc-cvs-of-pooled-samples" class="nav-link active" data-scroll-target="#cvs-of-pooled-samples"><em>CVs of pooled samples</em></a></li>
  <li><a href="#barplot" id="toc-barplot" class="nav-link" data-scroll-target="#barplot">Barplot</a></li>
  </ul>
</nav>
</div>
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Untargeted HDL lipidomics peak height</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Cynthia </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<section id="cvs-of-pooled-samples" class="level2">
<h2 class="anchored" data-anchor-id="cvs-of-pooled-samples"><em>CVs of pooled samples</em></h2>
<p><em>The CVs of pooled samples for each lipid species were calculated using the following formula:</em></p>
<p><span class="math display">\[
CV_{lipid\ species} = SD_{lipid\ species}/Mean_{lipid\ species} * 100\%
\]</span></p>
<p><em>We are less confident with the lipid species with a high CV. These lipid species will be excluded for further analysis.</em></p>
<div class="cell">
<div class="cell-output-display">
<div class="shiny-plot-output html-fill-item" id="hist" style="width:100%;height:400px;"></div>
</div>
<div class="cell-output-display">
<pre class="shiny-text-output noplaceholder" id="cv30"></pre>
</div>
</div>
<p>Select lipid species without iSTD and normalize their peak heights to total peak heights within each sample.</p>
<p>Total peak heights consists of major lipid species which can be quantified with iSTDs and minor species which don’t have corresponding iSTDs. The percentage of both types of species are shown below.</p>
<div class="cell">
<div class="cell-output-display">
<div class="shiny-plot-output html-fill-item" id="pie" style="width:100%;height:400px;"></div>
</div>
</div>
</section>
<section id="barplot" class="level2">
<h2 class="anchored" data-anchor-id="barplot">Barplot</h2>
<div class="cell">
<div class="cell-output-display no-overflow-x">
<div class="form-group shiny-input-container">
<label class="control-label" id="feature-label" for="feature">Lipid species</label>
<div>
<select id="feature"><option value="13-HODE" selected="">13-HODE</option>
<option value="13-HODE cholesteryl ester">13-HODE cholesteryl ester</option>
<option value="13-KODE">13-KODE</option>
<option value="16(17)-EpDPE">16(17)-EpDPE</option>
<option value="3-beta-hydroxy-5-cholestenoic acid">3-beta-hydroxy-5-cholestenoic acid</option>
<option value="8-HETE">8-HETE</option>
<option value="CerP 16:1;2O/18:1">CerP 16:1;2O/18:1</option>
<option value="CerP 18:1;2O/16:0">CerP 18:1;2O/16:0</option>
<option value="CerP 42:2;2O">CerP 42:2;2O</option>
<option value="cis-13-docosenoic acid">cis-13-docosenoic acid</option>
<option value="CoQ10">CoQ10</option>
<option value="DGCC 16:0|DGCC 8:0_8:0">DGCC 16:0|DGCC 8:0_8:0</option>
<option value="docosanamide">docosanamide</option>
<option value="FAHFA 18:0/20:2">FAHFA 18:0/20:2</option>
<option value="FAHFA 26:0">FAHFA 26:0</option>
<option value="FAHFA 40:3">FAHFA 40:3</option>
<option value="GalCer 18:1_24:1">GalCer 18:1_24:1</option>
<option value="GlcCer d40:1">GlcCer d40:1</option>
<option value="GlcCer d41:1">GlcCer d41:1</option>
<option value="GlcCer d42:1">GlcCer d42:1</option>
<option value="GlcCer d42:2">GlcCer d42:2</option>
<option value="GlcCerd14:14E/20:02OH">GlcCerd14:14E/20:02OH</option>
<option value="GM3 d34:1">GM3 d34:1</option>
<option value="Hex3Cer 18:1;2O/16:0">Hex3Cer 18:1;2O/16:0</option>
<option value="HexCer 18:1;2O/24:0">HexCer 18:1;2O/24:0</option>
<option value="HexCer-NS d40:1">HexCer-NS d40:1</option>
<option value="HexCer-NS d41:1">HexCer-NS d41:1</option>
<option value="HexCer-NS d42:2">HexCer-NS d42:2</option>
<option value="lactosylceramide d18:1/24:1 15Z">lactosylceramide d18:1/24:1 15Z</option>
<option value="LNAPE 20:4_N-19:1">LNAPE 20:4_N-19:1</option>
<option value="LNAPE 20:4_N-3:0">LNAPE 20:4_N-3:0</option>
<option value="LPA 18:0">LPA 18:0</option>
<option value="LPC O-16:0">LPC O-16:0</option>
<option value="LPC O-18:0">LPC O-18:0</option>
<option value="LPC O-18:1">LPC O-18:1</option>
<option value="LPC O-18:2">LPC O-18:2</option>
<option value="LPC O-20:0">LPC O-20:0</option>
<option value="LPC O-20:1">LPC O-20:1</option>
<option value="LPC O-22:0">LPC O-22:0</option>
<option value="LPC O-22:1">LPC O-22:1</option>
<option value="LPC O-24:0">LPC O-24:0</option>
<option value="LPC O-24:1">LPC O-24:1</option>
<option value="LPC P-16:0 or LPC O-16:1">LPC P-16:0 or LPC O-16:1</option>
<option value="LPE O-16:1">LPE O-16:1</option>
<option value="MG 20:4">MG 20:4</option>
<option value="MGDG 16:0_20:3">MGDG 16:0_20:3</option>
<option value="MGDG 34:2">MGDG 34:2</option>
<option value="MGDG 35:1">MGDG 35:1</option>
<option value="MGDG 38:3">MGDG 38:3</option>
<option value="MGDG 38:4">MGDG 38:4</option>
<option value="MGDG 48:0|MGDG 24:0_24:0">MGDG 48:0|MGDG 24:0_24:0</option>
<option value="NAE 14:1">NAE 14:1</option>
<option value="NAE 18:4">NAE 18:4</option>
<option value="NAE 20:2">NAE 20:2</option>
<option value="OxPC 36:3+1O">OxPC 36:3+1O</option>
<option value="PA 16:0_18:2">PA 16:0_18:2</option>
<option value="palmitamide">palmitamide</option>
<option value="palmitoyl ethanolamide">palmitoyl ethanolamide</option>
<option value="PC O-16:1_18:2">PC O-16:1_18:2</option>
<option value="PC O-18:0_16:0">PC O-18:0_16:0</option>
<option value="PC O-20:0_20:4 Isomer B">PC O-20:0_20:4 Isomer B</option>
<option value="PC O-30:0">PC O-30:0</option>
<option value="PC O-30:1">PC O-30:1</option>
<option value="PC O-31:7">PC O-31:7</option>
<option value="PC O-32:0">PC O-32:0</option>
<option value="PC O-32:1">PC O-32:1</option>
<option value="PC O-33:0">PC O-33:0</option>
<option value="PC O-33:1">PC O-33:1</option>
<option value="PC O-33:5">PC O-33:5</option>
<option value="PC O-33:6">PC O-33:6</option>
<option value="PC O-34:0">PC O-34:0</option>
<option value="PC O-35:1">PC O-35:1</option>
<option value="PC O-35:5">PC O-35:5</option>
<option value="PC O-36:0">PC O-36:0</option>
<option value="PC O-37:0">PC O-37:0</option>
<option value="PC O-37:5">PC O-37:5</option>
<option value="PC O-38:6|PC O-16:0_22:6">PC O-38:6|PC O-16:0_22:6</option>
<option value="PC O-39:7">PC O-39:7</option>
<option value="PC O-40:2 or PC 40:2e">PC O-40:2 or PC 40:2e</option>
<option value="PC O-40:3 or PC 40:3e">PC O-40:3 or PC 40:3e</option>
<option value="PC O-40:5">PC O-40:5</option>
<option value="PC O-42:2 or PC 42:2e">PC O-42:2 or PC 42:2e</option>
<option value="PC O-42:7 or PC 42:7e">PC O-42:7 or PC 42:7e</option>
<option value="PC O-44:8 or PC 44:8e">PC O-44:8 or PC 44:8e</option>
<option value="PC O-46:6 or PC 46:6e">PC O-46:6 or PC 46:6e</option>
<option value="PC O-46:7">PC O-46:7</option>
<option value="PC O-46:8">PC O-46:8</option>
<option value="PC P-32:0 or PC O-32:1">PC P-32:0 or PC O-32:1</option>
<option value="PC P-32:1 or PC O-32:2">PC P-32:1 or PC O-32:2</option>
<option value="PC P-34:0 or PC O-34:1">PC P-34:0 or PC O-34:1</option>
<option value="PC P-34:1 or PC O-34:2">PC P-34:1 or PC O-34:2</option>
<option value="PC P-34:1 or PC O-34:2 Isomer A">PC P-34:1 or PC O-34:2 Isomer A</option>
<option value="PC P-34:2 or PC O-34:3">PC P-34:2 or PC O-34:3</option>
<option value="PC P-36:1 or PC O-36:2">PC P-36:1 or PC O-36:2</option>
<option value="PC P-36:1 or PC O-36:2 A">PC P-36:1 or PC O-36:2 A</option>
<option value="PC P-36:2 or PC O-36:3">PC P-36:2 or PC O-36:3</option>
<option value="PC P-36:3 or PC O-36:4">PC P-36:3 or PC O-36:4</option>
<option value="PC P-36:4 or PC O-36:5">PC P-36:4 or PC O-36:5</option>
<option value="PC P-38:2 or PC O-38:3">PC P-38:2 or PC O-38:3</option>
<option value="PC P-38:3 or PC O-38:4">PC P-38:3 or PC O-38:4</option>
<option value="PC P-38:4 or PC O-38:5 A">PC P-38:4 or PC O-38:5 A</option>
<option value="PC P-38:4 or PC O-38:5 B">PC P-38:4 or PC O-38:5 B</option>
<option value="PC P-38:4 or PC O-38:5 Isomer B">PC P-38:4 or PC O-38:5 Isomer B</option>
<option value="PC P-38:5 or PC O-38:6">PC P-38:5 or PC O-38:6</option>
<option value="PC P-40:3 or PC O-40:4">PC P-40:3 or PC O-40:4</option>
<option value="PC P-40:4 or PC O-40:5">PC P-40:4 or PC O-40:5</option>
<option value="PC P-40:5 or PC O-40:6">PC P-40:5 or PC O-40:6</option>
<option value="PC P-40:6 or PC O-40:7 A">PC P-40:6 or PC O-40:7 A</option>
<option value="PC P-40:6 or PC O-40:7 B">PC P-40:6 or PC O-40:7 B</option>
<option value="PC P-42:3 or PC O-42:4">PC P-42:3 or PC O-42:4</option>
<option value="PC P-42:4 or PC O-42:5">PC P-42:4 or PC O-42:5</option>
<option value="PC P-42:5 or PC O-42:6">PC P-42:5 or PC O-42:6</option>
<option value="PC P-42:5 or PC O-42:6 A">PC P-42:5 or PC O-42:6 A</option>
<option value="PC P-44:4 or PC O-44:5">PC P-44:4 or PC O-44:5</option>
<option value="PC-O 16:0_18:1">PC-O 16:0_18:1</option>
<option value="PC-p 18:0_22:6">PC-p 18:0_22:6</option>
<option value="PE O-16:1_18:1">PE O-16:1_18:1</option>
<option value="PE O-16:1_18:2">PE O-16:1_18:2</option>
<option value="PE O-16:1_22:6">PE O-16:1_22:6</option>
<option value="PE O-18:1_20:3">PE O-18:1_20:3</option>
<option value="PE O-18:1_22:6">PE O-18:1_22:6</option>
<option value="PE O-18:2_22:6">PE O-18:2_22:6</option>
<option value="PE O-20:1_18:2">PE O-20:1_18:2</option>
<option value="PE O-20:1_20:4">PE O-20:1_20:4</option>
<option value="PE O-22:6_16:1">PE O-22:6_16:1</option>
<option value="PE O-36:1">PE O-36:1</option>
<option value="PE O-36:4">PE O-36:4</option>
<option value="PE O-38:2">PE O-38:2</option>
<option value="PE O-38:6 Isomer A">PE O-38:6 Isomer A</option>
<option value="PE O-38:6 Isomer B">PE O-38:6 Isomer B</option>
<option value="PE O-40:6">PE O-40:6</option>
<option value="PE P-34:1 or PE O-34:2">PE P-34:1 or PE O-34:2</option>
<option value="PE P-36:2 or PE O-36:3">PE P-36:2 or PE O-36:3</option>
<option value="PE P-36:5 or PE O-36:6">PE P-36:5 or PE O-36:6</option>
<option value="PE P-38:4 or PE O-38:5">PE P-38:4 or PE O-38:5</option>
<option value="PE P-38:5 or PE O-38:6">PE P-38:5 or PE O-38:6</option>
<option value="PE P-40:5 or PE O-40:6">PE P-40:5 or PE O-40:6</option>
<option value="PE-O 18:1_22:6">PE-O 18:1_22:6</option>
<option value="PGE2">PGE2</option>
<option value="Phosphatidylethanolamine alkenyl 16:0-20:4">Phosphatidylethanolamine alkenyl 16:0-20:4</option>
<option value="Phosphatidylethanolamine alkenyl 18:0-18:2">Phosphatidylethanolamine alkenyl 18:0-18:2</option>
<option value="prostaglandin F2.alpha. dimethylamine">prostaglandin F2.alpha. dimethylamine</option>
<option value="SHexCer d34:1">SHexCer d34:1</option>
<option value="ST 27:1;O">ST 27:1;O</option>
<option value="ST 27:1;O;S">ST 27:1;O;S</option>
<option value="ST 28:1;O;S">ST 28:1;O;S</option>
<option value="TG O-16:0_16:0_18:1">TG O-16:0_16:0_18:1</option>
<option value="TG O-18:0_16:0_18:1">TG O-18:0_16:0_18:1</option>
<option value="TG O-18:1_16:0_18:1">TG O-18:1_16:0_18:1</option></select>
<script type="application/json" data-for="feature" data-nonempty="">{"plugins":["selectize-plugin-a11y"]}</script>
</div>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="shiny-plot-output html-fill-item" id="bars" style="width:100%;height:400px;"></div>
</div>
</div>
<p>
<script type="application/shiny-prerendered" data-context="server-extras">
ojs_define <- function(..., .session = shiny::getDefaultReactiveDomain()) {
  quos <- rlang::enquos(...)
  vars <- rlang::list2(...)
  nm <- names(vars)
  if (is.null(nm)) {
    nm <- rep_len("", length(vars))
  }
  mapply(function(q, nm, val) {
    # Infer name, if possible
    if (nm == "") {
      tryCatch({
        nm <- rlang::as_name(q)
      }, error = function(e) {
        code <- paste(collapse = "\n", deparse(rlang::f_rhs(q)))
        stop("ojs_define() could not create a name for the argument: ", code)
      })
    }
    .session$output[[nm]] <- val
    outputOptions(.session$output, nm, suspendWhenHidden = FALSE)
    .session$sendCustomMessage("ojs-export", list(name = nm))
    NULL
  }, quos, nm, vars, SIMPLIFY = FALSE, USE.NAMES = FALSE)
  invisible()
}
</script>
</p>
<!--html_preserve-->
<script type="application/shiny-prerendered" data-context="dependencies">
{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["selectize"]},{"type":"character","attributes":{},"value":["0.12.4"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["www/shared/selectize"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["js/selectize.min.js","accessibility/js/selectize-plugin-a11y.min.js"]},{"type":"character","attributes":{},"value":["css/selectize.bootstrap3.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["shiny"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["1.7.4.1"]}]}]}
</script>
<!--/html_preserve-->
<!--html_preserve-->

<script type="application/shiny-prerendered" data-context="execution_dependencies">
{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["packages"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["packages","version"]},"class":{"type":"character","attributes":{},"value":["data.frame"]},"row.names":{"type":"integer","attributes":{},"value":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73]}},"value":[{"type":"character","attributes":{},"value":["base","bslib","cachem","cli","colorspace","compiler","cowplot","crayon","datasets","DBI","digest","dplyr","ellipsis","evaluate","fansi","fastmap","forcats","generics","ggplot2","ggsci","glue","graphics","grDevices","grid","gtable","hms","htmltools","htmlwidgets","HTSet","httpuv","jquerylib","jsonlite","knitr","later","lifecycle","lubridate","magrittr","memoise","methods","mime","munsell","pillar","pkgconfig","plyr","promises","purrr","R6","Rcpp","readr","reshape2","rlang","rmarkdown","rstudioapi","sass","scales","shiny","stats","stringi","stringr","tibble","tidyr","tidyselect","tidyverse","timechange","tools","tzdb","utf8","utils","vctrs","withr","xfun","xtable","yaml"]},{"type":"character","attributes":{},"value":["4.2.2","0.5.0","1.0.8","3.6.1","2.1-0","4.2.2","1.1.1","1.5.2","4.2.2","1.1.3","0.6.33","1.1.2","0.3.2","0.21","1.0.4","1.1.1","1.0.0","0.1.3","3.4.2","3.0.0","1.6.2","4.2.2","4.2.2","4.2.2","0.3.3","1.1.3","0.5.5","1.6.2","0.1.0","1.6.11","0.1.4","1.8.7","1.43","1.3.1","1.0.3","1.9.2","2.0.3","2.0.1","4.2.2","0.12","0.5.0","1.9.0","2.0.3","1.8.8","1.2.0.1","1.0.1","2.5.1","1.0.11","2.1.4","1.4.4","1.1.1","2.23","0.15.0","0.4.7","1.2.1","1.7.4.1","4.2.2","1.7.12","1.5.0","3.2.1","1.3.0","1.2.0","2.0.0","0.2.0","4.2.2","0.4.0","1.2.3","4.2.2","0.6.3","2.5.0","0.39","1.8-4","2.3.7"]}]}]}
</script>
<!--/html_preserve-->
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>